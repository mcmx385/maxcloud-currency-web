{"ast":null,"code":"import _regeneratorRuntime from\"D:/Files/Coding/react/reactjs-currency-converter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Files/Coding/react/reactjs-currency-converter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Files/Coding/react/reactjs-currency-converter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Files/Coding/react/reactjs-currency-converter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Files/Coding/react/reactjs-currency-converter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Files/Coding/react/reactjs-currency-converter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import Nav from'../components/Nav';import React,{Component}from'react';import{Line}from'react-chartjs-2';import{pastDate,todayDate}from'../libraries/datetime';import{Button}from'../components/Button';import Dropdown from'../components/Dropdown';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Currency=/*#__PURE__*/function(_Component){_inherits(Currency,_Component);var _super=_createSuper(Currency);// Setup\nfunction Currency(props){var _this;_classCallCheck(this,Currency);_this=_super.call(this,props);_this.renderAvailable=function(){return Object.keys(_this.state.available).map(function(key,id){return/*#__PURE__*/_jsxs(\"option\",{value:key,children:[key,\" (\",_this.state.available[key],\")\"]},id);});};_this.setBase=function(base){_this.setState({base:base},function(){return _this.updateRate();});};_this.setTarget=function(target){_this.setState({target:target},function(){return _this.updateRate();});};_this.setAmount=function(amount){_this.setState({amount:amount!==''?parseInt(amount):''},function(){return _this.convert();});};_this.setShowDays=function(days){var start_date=pastDate(days);_this.setState({show_days:days,start_date:start_date},function(){return _this.getRateTS();});};_this.convert=function(){_this.setState({result:_this.state.rate*_this.state.amount});};_this.onSubmit=function(e){if(e){e.preventDefault();}_this.convert();};_this.getRateTS=function(){var url='https://api.exchangerate.host/timeseries?start_date='+_this.state.start_date+'&end_date='+_this.state.end_date+'&base='+_this.state.base+'&symbols='+_this.state.target;fetch(url).then(function(response){return response.json();}).then(function(result){_this.setState({timeSeries:result.rates},function(){return _this.updateChart();});});};_this.updateChart=function(){var datetime=Object.keys(_this.state.timeSeries);var daterate=Object.values(_this.state.timeSeries);var arr=[];datetime.map(function(key,id){return arr.push(daterate[id][_this.state.target]);});_this.setState({chartData:arr,chartLabel:datetime});};_this.state={available:[],base:'HKD',target:'USD',rate:0,timeSeries:[],show_days:30,start_date:pastDate(30),end_date:todayDate(),amount:888,result:0,isLoading:false,isError:false,chartData:[],chartLabel:[]};return _this;}_createClass(Currency,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var response,available;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.setState({isLoading:true});_context.next=3;return fetch('https://openexchangerates.org/api/currencies.json');case 3:response=_context.sent;if(!response.ok){_context.next=11;break;}_context.next=7;return response.json();case 7:available=_context.sent;this.setState({available:available,isLoading:false},function(){return _this2.updateRate();});_context.next=12;break;case 11:this.setState({isError:true,isLoading:false});case 12:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"updateRate\",value:function(){var _updateRate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this3=this;var url,response,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url='https://api.exchangerate.host/convert?from='+this.state.base+'&to='+this.state.target;_context2.next=3;return fetch(url);case 3:response=_context2.sent;if(!response.ok){_context2.next=9;break;}_context2.next=7;return response.json();case 7:result=_context2.sent;this.setState({rate:result.result},function(){_this3.convert();_this3.getRateTS();});case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function updateRate(){return _updateRate.apply(this,arguments);}return updateRate;}()},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{title:\"CurrencyApp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Currency Converter\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:this.onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Base Currency\"}),/*#__PURE__*/_jsx(Dropdown,{name:\"type\",selected:this.state.base,onChange:this.setBase,data:this.state.available})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Target Currency\"}),/*#__PURE__*/_jsx(Dropdown,{name:\"type\",selected:this.state.target,onChange:this.setTarget,data:this.state.available})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col text-center py-2\",children:[\"Current Rate:\",' ',this.state.rate?this.state.rate:'Loading...']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Amount (From)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:this.state.amount,onChange:function onChange(e){return _this4.setAmount(e.target.value);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",children:\"Amount (To)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:this.state.result,disabled:true})]})})]}),/*#__PURE__*/_jsx(Button,{bgcolor:\"success\",submit:true,text:\"Convert\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Past Exchange Rate\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:this.state.show_days,onChange:function onChange(e){return _this4.setShowDays(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",id:\"basic-addon2\",children:\"Days\"})]})})]}),/*#__PURE__*/_jsx(Line,{data:{labels:this.state.chartLabel,datasets:[{label:'Exchange Rate from '+this.state.base+' to '+this.state.target+' in Past '+this.state.show_days+' Days',data:this.state.chartData,fill:false,backgroundColor:'rgb(255, 99, 132)',borderColor:'rgba(255, 99, 132, 0.2)'}]},options:{scales:{yAxes:[{ticks:{beginAtZero:true}}]}}})]})})]});}}]);return Currency;}(Component);export default Currency;","map":{"version":3,"sources":["D:/Files/Coding/react/reactjs-currency-converter/src/pages/Currency.js"],"names":["Nav","React","Component","Line","pastDate","todayDate","Button","Dropdown","Currency","props","renderAvailable","Object","keys","state","available","map","key","id","setBase","base","setState","updateRate","setTarget","target","setAmount","amount","parseInt","convert","setShowDays","days","start_date","show_days","getRateTS","result","rate","onSubmit","e","preventDefault","url","end_date","fetch","then","response","json","timeSeries","rates","updateChart","datetime","daterate","values","arr","push","chartData","chartLabel","isLoading","isError","ok","value","labels","datasets","label","data","fill","backgroundColor","borderColor","scales","yAxes","ticks","beginAtZero"],"mappings":"u9BAAA,MAAOA,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,OAASC,IAAT,KAAqB,iBAArB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,uBAApC,CACA,OAASC,MAAT,KAAuB,sBAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,C,2FAEMC,CAAAA,Q,oGACJ;AACA,kBAAYC,KAAZ,CAAmB,0CACjB,uBAAMA,KAAN,EADiB,MA+BnBC,eA/BmB,CA+BD,UAAM,CACtB,MAAOC,CAAAA,MAAM,CAACC,IAAP,CAAY,MAAKC,KAAL,CAAWC,SAAvB,EAAkCC,GAAlC,CAAsC,SAACC,GAAD,CAAMC,EAAN,CAAa,CACxD,mBACE,gBAAQ,KAAK,CAAED,GAAf,WACGA,GADH,MACU,MAAKH,KAAL,CAAWC,SAAX,CAAqBE,GAArB,CADV,OAAyBC,EAAzB,CADF,CAKD,CANM,CAAP,CAOD,CAvCkB,OA0CnBC,OA1CmB,CA0CT,SAACC,IAAD,CAAU,CAClB,MAAKC,QAAL,CAAc,CAAED,IAAI,CAAEA,IAAR,CAAd,CAA8B,iBAAM,OAAKE,UAAL,EAAN,EAA9B,EACD,CA5CkB,OA6CnBC,SA7CmB,CA6CP,SAACC,MAAD,CAAY,CACtB,MAAKH,QAAL,CAAc,CAAEG,MAAM,CAAEA,MAAV,CAAd,CAAkC,iBAAM,OAAKF,UAAL,EAAN,EAAlC,EACD,CA/CkB,OAgDnBG,SAhDmB,CAgDP,SAACC,MAAD,CAAY,CACtB,MAAKL,QAAL,CAAc,CAAEK,MAAM,CAAEA,MAAM,GAAK,EAAX,CAAgBC,QAAQ,CAACD,MAAD,CAAxB,CAAmC,EAA7C,CAAd,CAAiE,iBAC/D,OAAKE,OAAL,EAD+D,EAAjE,EAGD,CApDkB,OAqDnBC,WArDmB,CAqDL,SAACC,IAAD,CAAU,CACtB,GAAMC,CAAAA,UAAU,CAAG1B,QAAQ,CAACyB,IAAD,CAA3B,CACA,MAAKT,QAAL,CAAc,CAAEW,SAAS,CAAEF,IAAb,CAAmBC,UAAU,CAAVA,UAAnB,CAAd,CAA+C,iBAAM,OAAKE,SAAL,EAAN,EAA/C,EACD,CAxDkB,OA2DnBL,OA3DmB,CA2DT,UAAM,CACd,MAAKP,QAAL,CAAc,CAAEa,MAAM,CAAE,MAAKpB,KAAL,CAAWqB,IAAX,CAAkB,MAAKrB,KAAL,CAAWY,MAAvC,CAAd,EACD,CA7DkB,OA8DnBU,QA9DmB,CA8DR,SAACC,CAAD,CAAO,CAChB,GAAIA,CAAJ,CAAO,CACLA,CAAC,CAACC,cAAF,GACD,CACD,MAAKV,OAAL,GACD,CAnEkB,OAmFnBK,SAnFmB,CAmFP,UAAM,CAChB,GAAMM,CAAAA,GAAG,CACP,uDACA,MAAKzB,KAAL,CAAWiB,UADX,CAEA,YAFA,CAGA,MAAKjB,KAAL,CAAW0B,QAHX,CAIA,QAJA,CAKA,MAAK1B,KAAL,CAAWM,IALX,CAMA,WANA,CAOA,MAAKN,KAAL,CAAWU,MARb,CASAiB,KAAK,CAACF,GAAD,CAAL,CACGG,IADH,CACQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EADR,EAEGF,IAFH,CAEQ,SAACR,MAAD,CAAY,CAChB,MAAKb,QAAL,CAAc,CAAEwB,UAAU,CAAEX,MAAM,CAACY,KAArB,CAAd,CAA4C,iBAAM,OAAKC,WAAL,EAAN,EAA5C,EACD,CAJH,EAKD,CAlGkB,OAmGnBA,WAnGmB,CAmGL,UAAM,CAClB,GAAMC,CAAAA,QAAQ,CAAGpC,MAAM,CAACC,IAAP,CAAY,MAAKC,KAAL,CAAW+B,UAAvB,CAAjB,CACA,GAAMI,CAAAA,QAAQ,CAAGrC,MAAM,CAACsC,MAAP,CAAc,MAAKpC,KAAL,CAAW+B,UAAzB,CAAjB,CACA,GAAIM,CAAAA,GAAG,CAAG,EAAV,CACAH,QAAQ,CAAChC,GAAT,CAAa,SAACC,GAAD,CAAMC,EAAN,CAAa,CACxB,MAAOiC,CAAAA,GAAG,CAACC,IAAJ,CAASH,QAAQ,CAAC/B,EAAD,CAAR,CAAa,MAAKJ,KAAL,CAAWU,MAAxB,CAAT,CAAP,CACD,CAFD,EAGA,MAAKH,QAAL,CAAc,CAAEgC,SAAS,CAAEF,GAAb,CAAkBG,UAAU,CAAEN,QAA9B,CAAd,EACD,CA3GkB,CAEjB,MAAKlC,KAAL,CAAa,CACXC,SAAS,CAAE,EADA,CAEXK,IAAI,CAAE,KAFK,CAGXI,MAAM,CAAE,KAHG,CAIXW,IAAI,CAAE,CAJK,CAKXU,UAAU,CAAE,EALD,CAMXb,SAAS,CAAE,EANA,CAOXD,UAAU,CAAE1B,QAAQ,CAAC,EAAD,CAPT,CAQXmC,QAAQ,CAAElC,SAAS,EARR,CASXoB,MAAM,CAAE,GATG,CAUXQ,MAAM,CAAE,CAVG,CAWXqB,SAAS,CAAE,KAXA,CAYXC,OAAO,CAAE,KAZE,CAaXH,SAAS,CAAE,EAbA,CAcXC,UAAU,CAAE,EAdD,CAAb,CAFiB,aAkBlB,C,gJACD,0KACE,KAAKjC,QAAL,CAAc,CAAEkC,SAAS,CAAE,IAAb,CAAd,EADF,sBAEyBd,CAAAA,KAAK,CAC1B,mDAD0B,CAF9B,QAEQE,QAFR,mBAKMA,QAAQ,CAACc,EALf,gDAM4Bd,CAAAA,QAAQ,CAACC,IAAT,EAN5B,QAMU7B,SANV,eAOI,KAAKM,QAAL,CAAc,CAAEN,SAAS,CAATA,SAAF,CAAawC,SAAS,CAAE,KAAxB,CAAd,CAA+C,iBAAM,CAAA,MAAI,CAACjC,UAAL,EAAN,EAA/C,EAPJ,+BASI,KAAKD,QAAL,CAAc,CAAEmC,OAAO,CAAE,IAAX,CAAiBD,SAAS,CAAE,KAA5B,CAAd,EATJ,4D,0NAiDA,gLACQhB,GADR,CAEI,8CACA,KAAKzB,KAAL,CAAWM,IADX,CAEA,MAFA,CAGA,KAAKN,KAAL,CAAWU,MALf,wBAMyBiB,CAAAA,KAAK,CAACF,GAAD,CAN9B,QAMQI,QANR,oBAOMA,QAAQ,CAACc,EAPf,iDAQyBd,CAAAA,QAAQ,CAACC,IAAT,EARzB,QAQUV,MARV,gBASI,KAAKb,QAAL,CAAc,CAAEc,IAAI,CAAED,MAAM,CAACA,MAAf,CAAd,CAAuC,UAAM,CAC3C,MAAI,CAACN,OAAL,GACA,MAAI,CAACK,SAAL,GACD,CAHD,EATJ,6D,8GAyCA,iBAAS,iBACP,mBACE,oCACE,KAAC,GAAD,EAAK,KAAK,CAAC,aAAX,EADF,cAEE,YAAK,SAAS,CAAC,eAAf,uBACE,aAAK,SAAS,CAAC,UAAf,wBACE,0CADF,cAEE,cAAM,MAAM,CAAC,EAAb,CAAgB,QAAQ,CAAE,KAAKG,QAA/B,wBACE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,EAAf,2BADF,cAEE,KAAC,QAAD,EACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,KAAKtB,KAAL,CAAWM,IAFvB,CAGE,QAAQ,CAAE,KAAKD,OAHjB,CAIE,IAAI,CAAE,KAAKL,KAAL,CAAWC,SAJnB,EAFF,GADF,EADF,cAYE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,EAAf,6BADF,cAEE,KAAC,QAAD,EACE,IAAI,CAAC,MADP,CAEE,QAAQ,CAAE,KAAKD,KAAL,CAAWU,MAFvB,CAGE,QAAQ,CAAE,KAAKD,SAHjB,CAIE,IAAI,CAAE,KAAKT,KAAL,CAAWC,SAJnB,EAFF,GADF,EAZF,cAuBE,aAAK,SAAS,CAAC,sBAAf,2BACgB,GADhB,CAEG,KAAKD,KAAL,CAAWqB,IAAX,CAAkB,KAAKrB,KAAL,CAAWqB,IAA7B,CAAoC,YAFvC,GAvBF,GADF,cA6BE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,EAAf,2BADF,cAEE,cACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,cAFZ,CAGE,KAAK,CAAE,KAAKrB,KAAL,CAAWY,MAHpB,CAIE,QAAQ,CAAE,kBAACW,CAAD,QAAO,CAAA,MAAI,CAACZ,SAAL,CAAeY,CAAC,CAACb,MAAF,CAASkC,KAAxB,CAAP,EAJZ,EAFF,GADF,EADF,cAYE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,YAAf,wBACE,cAAO,OAAO,CAAC,EAAf,yBADF,cAEE,cACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,cAFZ,CAGE,KAAK,CAAE,KAAK5C,KAAL,CAAWoB,MAHpB,CAIE,QAAQ,KAJV,EAFF,GADF,EAZF,GA7BF,cAqDE,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,MAAM,CAAE,IAAlC,CAAwC,IAAI,CAAC,SAA7C,EArDF,GAFF,cAyDE,aAzDF,cA0DE,aAAK,SAAS,CAAC,KAAf,wBACE,YAAK,SAAS,CAAC,KAAf,uBACE,0CADF,EADF,cAIE,YAAK,SAAS,CAAC,KAAf,uBACE,aAAK,SAAS,CAAC,kBAAf,wBACE,cACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,cAFZ,CAGE,KAAK,CAAE,KAAKpB,KAAL,CAAWkB,SAHpB,CAIE,QAAQ,CAAE,kBAACK,CAAD,QAAO,CAAA,MAAI,CAACR,WAAL,CAAiBQ,CAAC,CAACb,MAAF,CAASkC,KAA1B,CAAP,EAJZ,EADF,cAOE,aAAM,SAAS,CAAC,kBAAhB,CAAmC,EAAE,CAAC,cAAtC,kBAPF,GADF,EAJF,GA1DF,cA4EE,KAAC,IAAD,EACE,IAAI,CAAE,CACJC,MAAM,CAAE,KAAK7C,KAAL,CAAWwC,UADf,CAEJM,QAAQ,CAAE,CACR,CACEC,KAAK,CACH,sBACA,KAAK/C,KAAL,CAAWM,IADX,CAEA,MAFA,CAGA,KAAKN,KAAL,CAAWU,MAHX,CAIA,WAJA,CAKA,KAAKV,KAAL,CAAWkB,SALX,CAMA,OARJ,CASE8B,IAAI,CAAE,KAAKhD,KAAL,CAAWuC,SATnB,CAUEU,IAAI,CAAE,KAVR,CAWEC,eAAe,CAAE,mBAXnB,CAYEC,WAAW,CAAE,yBAZf,CADQ,CAFN,CADR,CAoBE,OAAO,CAAE,CACPC,MAAM,CAAE,CACNC,KAAK,CAAE,CACL,CACEC,KAAK,CAAE,CACLC,WAAW,CAAE,IADR,CADT,CADK,CADD,CADD,CApBX,EA5EF,GADF,EAFF,GADF,CAoHD,C,sBApOoBlE,S,EA0OvB,cAAeM,CAAAA,QAAf","sourcesContent":["import Nav from '../components/Nav'\nimport React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { Line } from 'react-chartjs-2'\nimport { pastDate, todayDate } from '../libraries/datetime'\nimport { Button } from '../components/Button'\nimport Dropdown from '../components/Dropdown'\n\nclass Currency extends Component {\n  // Setup\n  constructor(props) {\n    super(props)\n    this.state = {\n      available: [],\n      base: 'HKD',\n      target: 'USD',\n      rate: 0,\n      timeSeries: [],\n      show_days: 30,\n      start_date: pastDate(30),\n      end_date: todayDate(),\n      amount: 888,\n      result: 0,\n      isLoading: false,\n      isError: false,\n      chartData: [],\n      chartLabel: [],\n    }\n  }\n  async componentDidMount() {\n    this.setState({ isLoading: true })\n    const response = await fetch(\n      'https://openexchangerates.org/api/currencies.json',\n    )\n    if (response.ok) {\n      const available = await response.json()\n      this.setState({ available, isLoading: false }, () => this.updateRate())\n    } else {\n      this.setState({ isError: true, isLoading: false })\n    }\n  }\n  renderAvailable = () => {\n    return Object.keys(this.state.available).map((key, id) => {\n      return (\n        <option value={key} key={id}>\n          {key} ({this.state.available[key]})\n        </option>\n      )\n    })\n  }\n\n  // Edit fields\n  setBase = (base) => {\n    this.setState({ base: base }, () => this.updateRate())\n  }\n  setTarget = (target) => {\n    this.setState({ target: target }, () => this.updateRate())\n  }\n  setAmount = (amount) => {\n    this.setState({ amount: amount !== '' ? parseInt(amount) : '' }, () =>\n      this.convert(),\n    )\n  }\n  setShowDays = (days) => {\n    const start_date = pastDate(days)\n    this.setState({ show_days: days, start_date }, () => this.getRateTS())\n  }\n\n  // Update actions\n  convert = () => {\n    this.setState({ result: this.state.rate * this.state.amount })\n  }\n  onSubmit = (e) => {\n    if (e) {\n      e.preventDefault()\n    }\n    this.convert()\n  }\n  async updateRate() {\n    const url =\n      'https://api.exchangerate.host/convert?from=' +\n      this.state.base +\n      '&to=' +\n      this.state.target\n    const response = await fetch(url)\n    if (response.ok) {\n      const result = await response.json()\n      this.setState({ rate: result.result }, () => {\n        this.convert()\n        this.getRateTS()\n      })\n    }\n  }\n  getRateTS = () => {\n    const url =\n      'https://api.exchangerate.host/timeseries?start_date=' +\n      this.state.start_date +\n      '&end_date=' +\n      this.state.end_date +\n      '&base=' +\n      this.state.base +\n      '&symbols=' +\n      this.state.target\n    fetch(url)\n      .then((response) => response.json())\n      .then((result) => {\n        this.setState({ timeSeries: result.rates }, () => this.updateChart())\n      })\n  }\n  updateChart = () => {\n    const datetime = Object.keys(this.state.timeSeries)\n    const daterate = Object.values(this.state.timeSeries)\n    var arr = []\n    datetime.map((key, id) => {\n      return arr.push(daterate[id][this.state.target])\n    })\n    this.setState({ chartData: arr, chartLabel: datetime })\n  }\n\n  render() {\n    return (\n      <div>\n        <Nav title=\"CurrencyApp\" />\n        <div className=\"container p-4\">\n          <div className=\"card p-4\">\n            <h3>Currency Converter</h3>\n            <form action=\"\" onSubmit={this.onSubmit}>\n              <div className=\"row\">\n                <div className=\"col-6\">\n                  <div className=\"form-group\">\n                    <label htmlFor=\"\">Base Currency</label>\n                    <Dropdown\n                      name=\"type\"\n                      selected={this.state.base}\n                      onChange={this.setBase}\n                      data={this.state.available}\n                    />\n                  </div>\n                </div>\n                <div className=\"col-6\">\n                  <div className=\"form-group\">\n                    <label htmlFor=\"\">Target Currency</label>\n                    <Dropdown\n                      name=\"type\"\n                      selected={this.state.target}\n                      onChange={this.setTarget}\n                      data={this.state.available}\n                    />\n                  </div>\n                </div>\n                <div className=\"col text-center py-2\">\n                  Current Rate:{' '}\n                  {this.state.rate ? this.state.rate : 'Loading...'}\n                </div>\n              </div>\n              <div className=\"row\">\n                <div className=\"col\">\n                  <div className=\"form-group\">\n                    <label htmlFor=\"\">Amount (From)</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      value={this.state.amount}\n                      onChange={(e) => this.setAmount(e.target.value)}\n                    />\n                  </div>\n                </div>\n                <div className=\"col\">\n                  <div className=\"form-group\">\n                    <label htmlFor=\"\">Amount (To)</label>\n                    <input\n                      type=\"number\"\n                      className=\"form-control\"\n                      value={this.state.result}\n                      disabled\n                    />\n                  </div>\n                </div>\n              </div>\n              <Button bgcolor=\"success\" submit={true} text=\"Convert\" />\n            </form>\n            <hr />\n            <div className=\"row\">\n              <div className=\"col\">\n                <h3>Past Exchange Rate</h3>\n              </div>\n              <div className=\"col\">\n                <div className=\"input-group mb-3\">\n                  <input\n                    type=\"number\"\n                    className=\"form-control\"\n                    value={this.state.show_days}\n                    onChange={(e) => this.setShowDays(e.target.value)}\n                  />\n                  <span className=\"input-group-text\" id=\"basic-addon2\">\n                    Days\n                  </span>\n                </div>\n              </div>\n            </div>\n            <Line\n              data={{\n                labels: this.state.chartLabel,\n                datasets: [\n                  {\n                    label:\n                      'Exchange Rate from ' +\n                      this.state.base +\n                      ' to ' +\n                      this.state.target +\n                      ' in Past ' +\n                      this.state.show_days +\n                      ' Days',\n                    data: this.state.chartData,\n                    fill: false,\n                    backgroundColor: 'rgb(255, 99, 132)',\n                    borderColor: 'rgba(255, 99, 132, 0.2)',\n                  },\n                ],\n              }}\n              options={{\n                scales: {\n                  yAxes: [\n                    {\n                      ticks: {\n                        beginAtZero: true,\n                      },\n                    },\n                  ],\n                },\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\nCurrency.propTypes = {\n  amount: PropTypes.number,\n}\n\nexport default Currency\n"]},"metadata":{},"sourceType":"module"}